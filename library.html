<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallpaper Library | Ben Draws</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Lexend', sans-serif;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-zinc-900 to-black text-white min-h-screen flex flex-col">

  <header class="flex items-center justify-between p-6 md:px-12">
    <div class="text-2xl font-bold tracking-wide">Ben Draws</div>
    <nav class="space-x-6 text-sm">
      <a href="index.html" class="hover:text-blue-400 transition">Home</a>
      <a href="commissions.html" class="hover:text-blue-400 transition">Commissions</a>
    </nav>
  </header>

  <main class="flex-grow max-w-5xl mx-auto p-6 md:px-12">
    <h1 class="text-4xl font-bold mb-6 text-center">Wallpaper Library</h1>

    <div class="mb-6 text-center">
      <label for="category-select" class="mr-4 text-lg font-semibold">Select Theme:</label>
      <select id="category-select" class="bg-zinc-800 text-white p-2 rounded">
        <option>Loading...</option>
      </select>
    </div>

    <div id="wallpapers-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </main>

  <footer class="text-center text-zinc-500 text-sm py-6 mt-auto">
    Â© 2025 Ben Draws. Wallpapers
  </footer>

  <script>
    async function loadWallpapers() {
      try {
        const res = await fetch('wallpapers.json');
        const data = await res.json();

        const categorySelect = document.getElementById('category-select');
        const wallpapersGrid = document.getElementById('wallpapers-grid');

        // Clear existing options
        categorySelect.innerHTML = '';

        // Populate categories in dropdown
        data.categories.forEach((cat, index) => {
          const option = document.createElement('option');
          option.value = index;
          option.textContent = cat.name;
          categorySelect.appendChild(option);
        });

        // Function to show wallpapers of selected category
        function showWallpapers(categoryIndex) {
          wallpapersGrid.innerHTML = '';

          const wallpapers = data.categories[categoryIndex].wallpapers;

          if (!wallpapers.length) {
            wallpapersGrid.innerHTML = '<p class="text-zinc-400 col-span-full text-center">No wallpapers in this category yet.</p>';
            return;
          }

          wallpapers.forEach(wp => {
            const card = document.createElement('div');
            card.className = 'bg-zinc-800 rounded-lg overflow-hidden shadow-lg flex flex-col';

            card.innerHTML = `
              <img src="${wp.image}" alt="${wp.title}" class="w-full h-48 object-cover" />
              <div class="p-4 flex flex-col flex-grow">
                <h3 class="text-lg font-semibold mb-2">${wp.title}</h3>
                <p class="mt-auto font-bold">${wp.price}</p>
              </div>
            `;

            wallpapersGrid.appendChild(card);
          });
        }

        // Show first category wallpapers on load
        showWallpapers(0);

        // Change wallpapers when category changes
        categorySelect.addEventListener('change', (e) => {
          showWallpapers(e.target.value);
        });
      } catch (error) {
        console.error('Error loading wallpapers:', error);
        document.getElementById('category-select').innerHTML = '<option>Error loading categories</option>';
        document.getElementById('wallpapers-grid').innerHTML = '<p class="text-red-500 text-center">Failed to load wallpapers data.</p>';
      }
    }

    loadWallpapers();
  </script>

</body>
</html>
