<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallpaper Detail | Ben Draws</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Lexend', sans-serif;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-zinc-900 to-black text-white min-h-screen flex flex-col">

  <header class="flex items-center justify-between p-6 md:px-12">
    <div class="text-2xl font-bold tracking-wide">Ben Draws</div>
    <nav class="space-x-6 text-sm">
      <a href="index.html" class="hover:text-blue-400 transition">Home</a>
      <a href="library.html" class="hover:text-blue-400 transition">Wallpaper Library</a>
      <a href="commissions.html" class="hover:text-blue-400 transition">Commissions</a>
    </nav>
  </header>

  <main class="flex-grow max-w-4xl mx-auto p-6 md:px-12">
    <div id="wallpaper-detail" class="text-center">
      <p class="text-zinc-400">Loading wallpaper details...</p>
    </div>
  </main>

  <footer class="text-center text-zinc-500 text-sm py-6 mt-auto">
    Â© 2025 Ben Draws. Wallpapers
  </footer>

  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    async function loadWallpaperDetail() {
      const wallpaperId = getQueryParam('id');
      const detailDiv = document.getElementById('wallpaper-detail');

      if (!wallpaperId) {
        detailDiv.innerHTML = '<p class="text-red-500">No wallpaper selected.</p>';
        return;
      }

      try {
        const res = await fetch('wallpapers.json');
        const data = await res.json();

        let wallpaper = null;

        // Find wallpaper by id
        for (const category of data.categories) {
          wallpaper = category.wallpapers.find(wp => wp.id === wallpaperId);
          if (wallpaper) break;
        }

        if (!wallpaper) {
          detailDiv.innerHTML = '<p class="text-red-500">Wallpaper not found.</p>';
          return;
        }

        // Render detail view
        detailDiv.innerHTML = `
          <h1 class="text-4xl font-bold mb-4">${wallpaper.title}</h1>
          <img src="${wallpaper.image}" alt="${wallpaper.title}" class="mx-auto rounded-lg shadow-lg mb-6 max-h-[500px] object-contain" />
          <p class="mb-6 text-lg">${wallpaper.description || 'No description provided.'}</p>
          <p class="text-2xl font-bold mb-6">${wallpaper.price}</p>

          <form action="https://your-payment-link.example" method="POST" target="_blank">
            <input type="hidden" name="item" value="${wallpaper.title}" />
            <input type="hidden" name="price" value="${wallpaper.price}" />
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 transition px-8 py-3 rounded text-white font-semibold">
              Buy Now
            </button>
          </form>
        `;

      } catch (error) {
        detailDiv.innerHTML = '<p class="text-red-500">Error loading wallpaper data.</p>';
        console.error(error);
      }
    }

    loadWallpaperDetail();
  </script>
</body>
</html>

